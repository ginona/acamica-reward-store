(this["webpackJsonpreward-store"]=this["webpackJsonpreward-store"]||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var s=c(0),n=(c(10),c(1)),r=c.n(n),a=c(7),i=c.n(a),o=c(2),u=c.p+"static/media/coin.1fc21bda.svg",l=c(3),d=c.n(l),j=c(4),b={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},h="https://coding-challenge-api.aerolab.co/user/me",m="https://coding-challenge-api.aerolab.co/products",O="https://coding-challenge-api.aerolab.co/user/points",x="https://coding-challenge-api.aerolab.co/redeem",p=1e3,f=5e3,v=7500;function g(){return(g=Object(j.a)(d.a.mark((function e(t){var c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O,{method:"POST",headers:b,body:JSON.stringify({amount:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=function(e){return g.apply(this,arguments)};function y(){return(y=Object(j.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(h,{method:"GET",headers:b});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var C=function(){return y.apply(this,arguments)},P=r.a.createContext(),k=function(e){var t=r.a.useState({}),c=Object(o.a)(t,2),n=c[0],a=c[1],i=r.a.useState(0),u=Object(o.a)(i,2),l=u[0],d=u[1],j=r.a.useState(!1),b=Object(o.a)(j,2),h=b[0],m=b[1],O=r.a.useState([]),x=Object(o.a)(O,2),p=x[0],f=x[1];return r.a.useEffect((function(){C().then((function(e){a(e),d(e.points),f(e.redeemHistory)}))}),[]),Object(s.jsx)(P.Provider,{value:{users:n,setUsers:a,points:l,setPoints:d,history:h,setHistory:m,record:p},children:e.children})};var S=function(e){var t=r.a.useState(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],i=r.a.useContext(P),l=i.points,d=i.setPoints,j=r.a.useState(""),b=Object(o.a)(j,2),h=b[0],m=b[1];r.a.useEffect((function(){n&&setTimeout((function(){a(!1)}),3e3)}),[n]);var O=function(e){N(e).then((function(t){t&&"Points Updated"===t.message?(d(l+e),a(!0),m(t.message)):(a(!0),m("Error, try againt later."))}))};return Object(s.jsx)("section",{className:"modal-screen",children:Object(s.jsxs)("div",{className:"addCoins",children:[Object(s.jsx)("div",{children:n&&Object(s.jsx)("div",{className:"Points Updated"===h?"successEnabled successAddPoints colorAddPointsSuccess":"successEnabled successAddPoints colorAddPointsError",children:Object(s.jsxs)("h6",{className:"success-pointsSuccess",children:[" ",h," "]})})}),Object(s.jsx)("h4",{className:"title-addCoins",children:" Add more coins "}),Object(s.jsxs)("button",{className:"button-addCoins one",onClick:function(){return O(p)},children:[Object(s.jsx)("img",{src:u,alt:p}),p]}),Object(s.jsxs)("button",{className:"button-addCoins two",onClick:function(){return O(f)},children:[Object(s.jsx)("img",{src:u,alt:f}),f]}),Object(s.jsxs)("button",{className:"button-addCoins three",onClick:function(){return O(v)},children:[Object(s.jsx)("img",{src:u,alt:v}),v]}),Object(s.jsx)("button",{className:"close",onClick:function(){return e.setModal(!1)},children:" X "})]})})};var w=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),c=t[0],n=t[1],a=r.a.useContext(P),i=a.users,l=a.points,d=a.history,j=a.setHistory;return Object(s.jsxs)("header",{className:"header",children:[Object(s.jsxs)("div",{className:"headerOptions",children:[Object(s.jsxs)("div",{className:"historyButtons",children:[Object(s.jsx)("h2",{className:"historyText",onClick:function(){return j(!0)},style:{display:d?"none":"block"},children:"Go to history"}),Object(s.jsx)("h2",{onClick:function(){return j(!1)},style:{display:d?"block":"none"},children:"Go to catalog"})]}),Object(s.jsxs)("div",{className:"userNameInfo",children:[Object(s.jsxs)("h6",{className:"userName",children:[" ",i.name," "]}),Object(s.jsxs)("button",{className:"button-headerCoins",onClick:function(){return n(!0)},children:[l,Object(s.jsx)("img",{src:u,alt:"coin"})]})]})]}),c?Object(s.jsx)(S,{setModal:n}):null,Object(s.jsx)("div",{className:"container-header",children:Object(s.jsx)("h6",{className:"title-header",children:" Electronics "})})]})},E=(c(15),c(5)),I=c.p+"static/media/buy-blue.c5c4f01c.svg",F=c.p+"static/media/emoji-smile.c20c3e2f.svg",M=c.p+"static/media/sad-emoji.5a0ed267.svg";function T(){return(T=Object(j.a)(d.a.mark((function e(t){var c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x,{method:"POST",headers:b,body:JSON.stringify({productId:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var A=function(e){return T.apply(this,arguments)};var J=function(e){var t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],i=c[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),j=d[0],b=d[1],h=r.a.useContext(P),m=h.points,O=h.setPoints;return Object(s.jsxs)("div",{className:"card",style:{width:"18rem"},onMouseOver:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:[Object(s.jsx)("img",{src:e.img.url,className:a?"img-hovered card-img-top":"card-img-top",alt:e.name}),Object(s.jsx)("button",{type:"button",className:"btn btn-dark",disabled:e.cost>m,onClick:function(){return t=e._id,c=e.cost,void A(t).then((function(e){b(e.message),O(m<=0?0:m-c)}));var t,c},children:"Redeem now"}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.category}),Object(s.jsx)("h6",{className:"card-title",children:e.name})]}),a?Object(s.jsx)("div",{className:"card-hovered",children:Object(s.jsxs)("div",{className:"buttons-card-hovered",children:[Object(s.jsx)("img",{className:"buy",src:I,alt:"buy"}),Object(s.jsxs)("h5",{className:"card-cost",children:[" ",e.cost<=m?e.cost:"Te faltan "+(e.cost-m)," "]}),Object(s.jsx)("img",{className:"coin",src:u,alt:"coin"})]})}):null,"You've redeem the product successfully"===j?Object(s.jsxs)("div",{className:"product-modal",children:[Object(s.jsx)("button",{className:"close",id:"closeSuccessRedeeem",onClick:function(){return b("")},children:" X "}),Object(s.jsxs)("div",{className:"product-modal-div",children:[Object(s.jsx)("img",{className:"face",src:F,alt:"success"}),Object(s.jsxs)("h4",{className:"successRedeem",children:[" ",j," "]})]})]}):"undefined"===typeof j?Object(s.jsxs)("div",{className:"product-modal-failed",children:[Object(s.jsx)("button",{className:"close",id:"closeSuccessRedeeem",onClick:function(){return b("")},children:" X "}),Object(s.jsxs)("div",{className:"product-modal-div",children:[Object(s.jsx)("img",{className:"face",src:M,alt:"success"}),Object(s.jsx)("h4",{className:"successRedeem",children:" Error, try again. "})]})]}):null]})};function R(){return(R=Object(j.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m,{method:"GET",headers:b});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var L=function(){return R.apply(this,arguments)},U=function(e,t){var c=r.a.useState(1),s=Object(o.a)(c,2),n=s[0],a=s[1],i=Math.ceil(e.length/t),u=e.slice((n-1)*t,n*t);return{next:function(){a(n+1)},prev:function(){a(n-1)},jump:function(e){a(e)},currentPage:n,maxPage:i,currentArray:u}},D=function(){var e=r.a.useState([]),t=Object(o.a)(e,2),c=t[0],n=t[1],a=r.a.useState("recent"),i=Object(o.a)(a,2),u=i[0],l=i[1],d=r.a.useContext(P).history;r.a.useEffect((function(){L().then((function(e){return n(e)}))}),[]);var j=U(function(){switch(u){case"lowPrice":return c.sort((function(e,t){return parseFloat(e.cost)-parseFloat(t.cost)})).map((function(e,t){return Object(s.jsx)(J,Object(E.a)({},e),t)}));case"highPrice":return c.sort((function(e,t){return parseFloat(t.cost)-parseFloat(e.cost)})).map((function(e,t){return Object(s.jsx)(J,Object(E.a)({},e),t)}));default:return c.sort((function(e,t){return e._id<t._id?-1:1})).map((function(e,t){return Object(s.jsx)(J,Object(E.a)({},e),t)}))}}(),16),b=j.currentArray,h=j.next,m=j.prev,O=j.maxPage,x=j.currentPage;return Object(s.jsxs)("section",{style:{display:d?"none":"block"},children:[Object(s.jsxs)("section",{className:"filters",children:[Object(s.jsx)("button",{className:"btnFilter",onClick:function(){return l("recent")},children:"Most recent"}),Object(s.jsx)("button",{className:"btnFilter",onClick:function(){return l("lowPrice")},children:"Lowest price"}),Object(s.jsx)("button",{className:"btnFilter",onClick:function(){return l("highPrice")},children:"Highest price"})]}),Object(s.jsx)("section",{className:"container-cards",children:b}),Object(s.jsxs)("section",{className:"buttonsPagination",children:[Object(s.jsx)("button",{className:"btnPaginationLeft",onClick:function(){return m()},disabled:x<=1}),Object(s.jsx)("button",{className:"btnPaginationRight",onClick:function(){return h()},disabled:x>=O})]})]})},G=function(){var e=r.a.useContext(P),t=e.history,c=e.record,n=U(c,16),a=n.currentArray,i=n.next,o=n.prev,u=n.maxPage,l=n.currentPage;return Object(s.jsxs)("div",{style:{display:t?"block":"none"},children:[Object(s.jsxs)("table",{children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:" Product Id "}),Object(s.jsx)("th",{children:" Product Name "}),Object(s.jsx)("th",{children:" Product Cost "})]})}),Object(s.jsx)("tbody",{children:a.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.productId}),Object(s.jsx)("td",{children:e.name}),Object(s.jsx)("td",{children:e.cost})]},e.productId+t)}))})]}),Object(s.jsxs)("section",{className:"buttonsPagination",children:[Object(s.jsx)("button",{className:"btnPaginationLeft",onClick:function(){return o()},disabled:l<=1}),Object(s.jsx)("button",{className:"btnPaginationRight",onClick:function(){return i()},disabled:l>=u})]})]})};var H=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(k,{children:[Object(s.jsx)(w,{}),Object(s.jsx)(D,{}),Object(s.jsx)(G,{})]})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),r(e),a(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(H,{})}),document.getElementById("root")),Q()}},[[16,1,2]]]);
//# sourceMappingURL=main.cda7aacf.chunk.js.map